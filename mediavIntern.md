# Working Notes

## Week 1
### day 1 2016-05-30
- 报道, 装电脑
- 熟悉广告业务流程, 系统结构
- 阅读书"计算广告"

### day 2 2016-05-31
- 装系统, 配置环境
- 了解thrift
- 了解业务通信协议

### day 3 2016-06-01
- 学习广告业务资料
- 了解pig

### day 4 2016-06-02
- pig脚本: 计算美团(dspId==123)一天当中平均出价

### day 5 2016-06-03
- pig脚本: 
  - pig脚本执行出现权限问题, 尝试重定向tmp文件, 未果.
  - 可以执行pig脚本, 数据均为0, 查找异常
- 开会, 了解商业业务. 项目的价值(商业考虑), 项目的优势.

## Week 2
### day 6 2016-06-06
- pig脚本:
  - 数据重新定位. 之前定位的field是有误的. 在一个广告位有多个广告时, 使用的数据位置在list中
  - 修改脚本, 得出结果

### day 7 2016-06-07
- pig脚本:
  - 计算之前脚本中, 出价在各个价位段的比例(未完成)
  - 新任务: 计算外部dsp给内部dsp带来的提价差:
    - 计算时区分原生和非原生(一对一, 一对多)
    
### day 8 2016-06-08
- pig脚本:
  - 计算外部dsp给内部dsp带来的提价差(全天的量为三十多万元的差价)
  - 加深理解竞价规则(mvPrice, bidPrice, winPrice)

## Week 3
### day 9 2016-06-13
- 任务: 编写脚本, 计算昨天差价和, 发送邮件
- 功能点:
  - 每天定时启动脚本
  - 程序发送计算结果
- 实现:
  - 使用python编写脚本
  - 使用Python的smtplib包实现邮件的发送
  - 使用python的os包中popen执行pig命令
  - 使用linux的crontab实现每天的定时启动
- 纠错: 上周编写的pig脚本中, 对于一对多的情况, 未过滤winnerId, 造成总体的值偏大. 修正后的值为七八万左右

### day 10 2016-06-14
- 将昨日脚本中的总和分为移动流量和PC流量
- 学习redmine中项目的资料
- 申请svn权限, 还未审批

### day 11 2016-06-15
- 修改发送的邮件格式
- 获得svn权限

### day 12 2016-06-16
- py脚本: 解析bidId, impressionId
- pig脚本: 分析京东dsp和聚效dsp之间的竞争关系:
  - 只jd竞价的: 平均出价, 平均获胜价, 平均胜出率
  - 只mv竞价的: 平均出价, 平均获胜价, 平均胜出率
  - jd和mv都出价的: 平均出价, 平均获胜价, 平均胜出率 (两者都算)

### day 13 2016-06-17
- pig脚本: 分析京东dsp和聚效dsp之间的竞争关系
  - 增加jd和mv平均胜出价
  - 区分移动和PC

### day 14 2016-06-20
- pig脚本: 增加jd获胜时, jd和mv的平均出价
- 阅读代码

### day 15 2016-06-21
- 将之前的脚本扩展, 形成一个工具, 用于比较两个dsp
